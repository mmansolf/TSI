% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/convenience.R
\name{TSI}
\alias{TSI}
\title{True score imputation}
\usage{
TSI(
  data,
  os_names,
  score_types,
  se_names = NULL,
  metrics = NULL,
  mean = NULL,
  var_ts = NULL,
  reliability = NULL,
  separated = rep(T, length(os_names)),
  ts_names = paste0("true_", os_names),
  mice_args
)
}
\arguments{
\item{data}{Data frame on which to conduct imputation. By default, columns
with missing values which are numeric will be imputed with the \code{pmm}
method from \code{mice}, columns with names in \code{os_names} will be
imputed using true score imputation, and non-numeric columns will be
ignored.}

\item{os_names}{Character vector of names of variables in \code{data} on
which to use true score imputation.}

\item{score_types}{Character vector specifying psychometric model(s) used
for true score imputation. Currently available options are \code{'CTT'}
for classical test theory, \code{'EAP'} for item response theory with
expected a posteriori scoring, and \code{'ML'} for item response theory
with maximum likelihood scoring (not recommended). The selected  model
should match how scores were generated, which requires some understanding
of the scoring process; for instance, HealthMeasures instruments, which
include PROMIS, NIH Toolbox, and NeuroQOL measures, use EAP scoring to
generate T scores and therefore \code{score_types='EAP'} would be
appropriate when using these T scores.}

\item{se_names}{Required for \code{score_types='EAP'} or
\code{score_types='ML'}. Character vector of names of variables in data set
containing standard errors for score variables specified by \code{os_names}.
One variable must be specified for each variable in \code{os_names}. Not
required for \code{score_types='CTT'}.}

\item{metrics}{Character vector of metrics of true scores for
imputation. Available values are \code{'z'} for z scores (mean 0,
variance 1), \code{'T'} for T scores (mean 50, variance 100), and
\code{'standard'} for standard (IQ metric) scores (mean 100, variance 225).
Either \code{metrics} or both \code{mean} and \code{var_ts} below must be
specified for each variable, with each element referring to the
corresponding variable named in \code{os_names}.}

\item{mean}{Numeric vector of means of true scores for imputation. Must be
specified if \code{metrics} is not specified.}

\item{var_ts}{Numeric vector of variances of true scores for imputation.
Must be specified if \code{metrics} is not specified.}

\item{reliability}{Required for \code{score_types='CTT'}. Numeric vector of
reliability estimates, one for each observed score variable in
\code{os_names} referring to the reliability of the corresponding variable
named in \code{os_names}.}

\item{separated}{Logical vector indicating whether, for variables imputed
with \code{score_types='EAP'} or \code{score_types='ML'}, true score
imputation uses an average standard error (\code{separated=F}), which runs
faster but doesn't account for differential measurement error of the
observed scores for each respondent, or whether separate standard errors
are used for each value of each observed score (\code{separated=T}), which
runs slower but accounts for differential measurement error.}

\item{ts_names}{Optional vector of names of true score variables which
will be created. Each element of \code{ts_names} denotes the name of the
variable which will be created by \code{TSI} based on observed scores from
the corresponding element of \code{os_names}. The default value of
\code{NULL} results in the prefix \code{true_} being prepended to each
element of \code{os_names} when generating the imputed true scores.}

\item{mice_args}{Named list of additional arguments passed to \code{mice}}
}
\description{
Conduct true score imputation on variables with psychometric error,
optionally in concert with multiple imputation for missing data. This
function calls the \code{mice} function in the package of
the same name, using the custom imputation function
\code{\link[TSI]{mice.impute.truescore}} for imputation of mismeasured
variables. Direct calls to \code{mice} can get complicated (see
documentation of \code{\link[TSI]{mice.impute.truescore}} for examples),
so this function was created as a convenicene function to more easily
generate those function calls.
}
\examples{
##############
# CTT SCORES #
mice.data=TSI(data_ctt,
              os_names='w',
              score_types='CTT',
              reliability=0.6,
              mean=0,
              var_ts=1,
              mice_args=list(m=5,printFlag=F))
mice.data

#analyze with imputed true scores
pool(with(mice.data,lm(true_w~y)))

#compare standard deviations of observed and imputed true scores
mice.data=complete(mice.data,'all')
sds=sapply(mice.data,function(d)apply(d,2,sd))
apply(sds,1,mean)

##############
# EAP SCORES #
set.seed(0)
mice.data=TSI(data_eap,
              os_names=c('Fx','Fy'),
              se_names=c('SE.Fx','SE.Fy'),
              metrics='T',
              score_types='EAP',
              separated=T,
              ts_names=c('Tx','Ty'),
              mice_args=c(m=5,maxit=5,printFlag=F))
mice.data

#multiple regression with imputed true scores
pool(with(mice.data,lm(Ty~Tx+m)))
}
